<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<style>
			body {
				background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)),
						no-repeat center center fixed;
				-webkit-background-size: cover;
				-moz-background-size: cover;
				-o-background-size: cover;
				background-size: cover;
				font-family: "Roboto", sans-serif;
			}
		</style>
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap"
			rel="stylesheet"
		/>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
			crossorigin="anonymous"
		/>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
			crossorigin="anonymous"
		></script>
		<title>Stremio Jackett Addon</title>
	</head>
	<body>
		<section class="vh-100">
			<div class="container py-5 h-100">
				<div class="row d-flex justify-content-center align-items-center h-100">
					<div class="col-12 col-md-8 col-lg-6 col-xl-5">
						<div class="card bg-dark text-white" style="border-radius: 1rem">
							<div class="card-body p-5 text-center">
								<div class="mb-md-5 mt-md-4 pb-5">
									<img
										src="https://user-images.githubusercontent.com/27040483/28728094-99f3e3f6-73c7-11e7-8f8d-28912dc6ac0d.png"
										class="img-fluid mb-5"
										alt="logo"
										width="100"
										height="100"
									/>
									<h2 class="fw-bold mb-2 text-uppercase">Stremio Jackett Addon</h2>
									<p class="text-white-50 mb-5">0.0.1</p>
									<div class="form-outline form-white mb-4" id="maxResultDiv">
										<label class="form-label">Number of results per search </label>
										<input
											required
											class="form-control form-control-lg"
											placeholder="Enter maximum results per search"
											oninput="updateLink()"
											id="maxResults"
										/>
									</div>

									<a id="configureLink" href="" class="btn btn-primary">Install</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		<script>
			function updateLink() {
				let serviceProvider = 'torrent';
				let maxResults = document.getElementById("maxResults").value;
				let dynamicLink = document.getElementById("configureLink");

				if (serviceProvider === "torrent") {
					let dataJson = {
						streamService: serviceProvider,
						maxResults: maxResults,
					};
					dynamicLink.href = `stremio://${
						window.location.host
					}${window.location.pathname.replace("/configure", "")}/${btoa(
						JSON.stringify(dataJson)
					)}/manifest.json`;
				}
			}

			updateLink();
		</script>
	</body>
</html>
